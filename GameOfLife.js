// Generated by CoffeeScript 1.6.3
/*
This file only contains little helper function that I probably shouldn't really need anyway.
If these can all be replaced by builtins, that's be great.
*/(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;h=function(e){return e===0?0:1};d=function(e,t,n){if(t>=0&&n>=0&&t<e.length&&n<e[0].length)return e[t][n]++};v=function(e,t,n){return e[(t+e.length)%e.length][(n+e[1].length)%e[1].length]++};p=v;A=function(e,t,n){if(t>=0&&n>=0&&t<e.length&&n<e[0].length)return e[t][n]=0};x=function(e,t,n){return"rgb("+e+","+t+","+n+")"};T=function(e,t,n,r){return"rgba("+e+","+t+","+n+","+r+")"};t=function(e,t,n){var r,i,s,o,u,a,f,l;o=Math.floor(e*6);i=e*6-o;u=n*(1-t);a=n*(1-i*t);l=n*(1-(1-i)*t);switch(o%6){case 0:f=n;s=l;r=u;break;case 1:f=a;s=n;r=u;break;case 2:f=u;s=n;r=l;break;case 3:f=u;s=a;r=n;break;case 4:f=l;s=u;r=n;break;case 5:f=n;s=u;r=a}return x(Math.floor(f*255),Math.floor(s*255),Math.floor(r*255))};e=jQuery;C=[[!1,!1,!1,!0,!1,!1,!1,!1,!1],[!1,!1,!0,!0,!1,!1,!1,!1,!1]];w=[[!1,!1,!1,!1,!1],[!1,!0,!0,!0,!1],[!1,!0,!1,!0,!1],[!1,!0,!0,!0,!1],[!1,!1,!1,!1,!1]];L=function(t){e(t).css({visibility:"visible",opacity:0});return e(t).animate({opacity:1})};k=function(t){return e(t).animate({opacity:0},function(){return e(t).css({visibility:"hidden"})})};this.help=function(){N.helpShown=!N.helpShown;N.paused=N.helpShown;return N.helpShown?L(".helpBox"):k(".helpBox")};this.toggleRule=function(e,t){return C[e][t]=!C[e][t]};this.toggleNeighborhood=function(e,t){return w[e][t]=!w[e][t]};this.moreCells=function(){N.gridSpacing*=.9;r*=.9;N.gridWidth=o.width/gridSpacing;N.gridHeight=o.width/gridSpacing;return c()};this.fewerCells=function(){N.gridSpacing/=.9;r/=.9;N.gridWidth=o.width/gridSpacing;return N.gridHeight=o.width/gridSpacing};b={x:0,y:0,down:[!1,!1,!1,!1,!1,!1,!1,!1,!1],getX:function(){return this.x},getY:function(){return this.y},getButtonX:function(){return Math.floor(this.x/s)},getButtonY:function(){return Math.floor(this.y/i)},getGridX:function(){return Math.floor(this.x/gridSpacing)},getGridY:function(){return Math.floor(this.y/gridSpacing)},distanceTo:function(e,t){return Math.sqrt(Math.pow(e-this.x,2)+Math.pow(t-this.y,2))}};m=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,d,v;b.x=e.pageX;b.y=e.pageY;t=b.getGridX();n=b.getGridY();if(b.down[1]){if(!N.userHasCreatedCells){N.userHasCreatedCells=!0;k("#tutorialCreateCells");N.userHasChangedRules||L("#tutorialChangeRules")}for(r=s=a=t-N.brushSize,f=t+1+N.brushSize;a<=f?s<f:s>f;r=a<=f?++s:--s)for(i=o=l=n-N.brushSize,c=n+1+N.brushSize;l<=c?o<c:o>c;i=l<=c?++o:--o)p(ages,r,i)}if(b.down[3]){N.userHasDeletedCells=!0;v=[];for(r=u=h=t-N.brushSize,d=t+1+N.brushSize;h<=d?u<d:u>d;r=h<=d?++u:--u)v.push(function(){var e,t,s,o;o=[];for(i=e=t=n-N.brushSize,s=n+1+N.brushSize;t<=s?e<s:e>s;i=t<=s?++e:--e)o.push(A(ages,r,i));return o}());return v}};c=function(){return N.ages=E()};e(window).resize(function(){var e,t;o.width=window.innerWidth;o.height=window.innerHeight;t=50;e=o.height/9;N.gridWidth=o.width/gridSpacing;N.gridHeight=o.width/gridSpacing;return c()});e(function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,g,E,S,x;e("#ruleTable").append('<tr>\n	<th title="This column determines how dead cells can come to life" style="height:30px;" class="tableHeader">Dead</th>\n	<th title="This column determines how live cells can stay alive" style="height:30px;" class="tableHeader">Alive</th>\n</tr>');for(i=a=0,v=9;0<=v?a<v:a>v;i=0<=v?++a:--a){n="ruleButton";C[0][i]&&(n+=" down");r="ruleButton";C[1][i]&&(r+=" down");e("#ruleTable").append('<tr>\n	<td title="When this button is illuminated, dead cells with '+i+" neighbors will come to life.\nWhen this button is dark, dead cells with "+i+' neighbors will stay dead."\ntype="button" class=" '+n+' " onclick="toggleRule(0, '+i+')">'+i+'</td>\n<td title="When this button is illuminated, live cells with '+i+" neighbors will stay alive.\nWhen this button is dark, live cells with "+i+' neighbors will die."\ntype="button" class=" '+r+' " onclick="toggleRule(1, '+i+')">'+i+"</td>\n</tr>")}s=e("#neighborhoodOptionsTable>tbody");g=function(){S=[];for(var e=0;0<=y?e<y:e>y;0<=y?e++:e--)S.push(e);return S}.apply(this).reverse();for(f=0,h=g.length;f<h;f++){u=g[f];s.append("<tr>");E=function(){x=[];for(var e=0;0<=y?e<y:e>y;0<=y?e++:e--)x.push(e);return x}.apply(this).reverse();for(c=0,p=E.length;c<p;c++){o=E[c];t="neighborhoodButton";w[o][u]&&(t+=" down");s.append('<td type="button" class=" '+t+' " onclick="toggleNeighborhood( '+o+","+u+' )"></td>')}s.append("</tr>")}e(".ruleButton").click(function(){var e;if(!N.userHasChangedRules){N.userHasChangedRules=!0;k("#tutorialChangeRules");e=1e3;setTimeout(function(){return L("#tutorialLeftCol")},e);setTimeout(function(){return k("#tutorialLeftCol")},e+=4e3);setTimeout(function(){return L("#tutorialRightCol")},e);setTimeout(function(){return k("#tutorialRightCol")},e+=4e3);setTimeout(function(){return L("#tutorialRow")},e);setTimeout(function(){return k("#tutorialRow")},e+=4e3);setTimeout(function(){return L("#tutorialMouseOver")},e);return setTimeout(function(){return k("#tutorialMouseOver")},e+=4e3)}});e(".minButton").click(function(){return e(this).parent().children("div").slideToggle()});e("#myCanvas").mousedown(function(e){b.down[e.which]=!0;return m(e)});e("#myCanvas").mouseup(function(e){b.down[e.which]=!1;if(N.help){N.help=!1;return N.paused=!1}});e("#myCanvas").mousemove(function(e){return m(e)});e("#pauseButton").click(function(){N.paused=!N.paused;return N.paused?e(this).html("Play"):e(this).html("Pause")});e("#1x1").click(function(){return N.brushSize=0});e("#2x2").click(function(){return N.brushSize=.5});e("#3x3").click(function(){return N.brushSize=1});e("#5x5").click(function(){return N.brushSize=2});e("#9x9").click(function(){return N.brushSize=4});e(".neighborhoodButton,.minButton,.ruleButton").addClass("toggle");e(".toggle").click(function(){return e(this).toggleClass("down")});e(".radio").click(function(){e(this).siblings().removeClass("down");return e(this).addClass("down")});e("#5x5").click();return e("#fast").click()});N=typeof exports!="undefined"&&exports!==null?exports:this;o=document.getElementById("myCanvas");a=o.getContext("2d");this.setDelay=function(e){return N.delay=e};n=function(){var e;e=1e5;return a.fillRect(-e,-e,2*e,2*e)};g=function(){var e,t,n,r,i;i=[];for(e=n=0,r=N.gridWidth;0<=r?n<r:n>r;e=0<=r?++n:--n)i.push(function(){var e,n,r;r=[];for(t=e=0,n=N.gridHeight;0<=n?e<n:e>n;t=0<=n?++e:--e)r.push(0);return r}());return i};this.clearGrid=function(){var e,t,n,r,i;i=[];for(e=n=0,r=N.gridWidth;0<=r?n<r:n>r;e=0<=r?++n:--n)i.push(function(){var n,r,i;i=[];for(t=n=0,r=N.gridHeight;0<=r?n<r:n>r;t=0<=r?++n:--n)i.push(N.ages[e][t]=0);return i}());return i};S=function(e,t){var n,r,i,s;console.log(N.gridWidth);s=[];for(n=i=0;0<=e?i<e:i>e;n=0<=e?++i:--i)s.push(function(){var e,n;n=[];for(r=e=0;0<=t?e<t:e>t;r=0<=t?++e:--e)n.push(Math.floor(Math.random()+.4));return n}());return s};E=function(){return S(N.gridWidth,N.gridHeight)};this.randomizeGrid=function(){var e,t,n,r,i;i=[];for(e=n=0,r=N.gridWidth;0<=r?n<r:n>r;e=0<=r?++n:--n)i.push(function(){var n,r,i;i=[];for(t=n=0,r=N.gridHeight;0<=r?n<r:n>r;t=0<=r?++n:--n)i.push(N.ages[e][t]=Math.floor(Math.random()+.4));return i}());return i};u=function(){var e,t,n,r,i,s,o,u,a,f,l,c,d,v;n=g();for(r=s=0,l=N.gridWidth;0<=l?s<l:s>l;r=0<=l?++s:--s)for(i=o=0,c=N.gridHeight;0<=c?o<c:o>c;i=0<=c?++o:--o)if(N.ages[r][i]!==0)for(e=u=0;0<=y?u<y:u>y;e=0<=y?++u:--u)for(t=a=0;0<=y?a<y:a>y;t=0<=y?++a:--a)w[e][t]&&p(n,r+e-2,i+t-2);v=[];for(r=f=0,d=N.gridWidth;0<=d?f<d:f>d;r=0<=d?++f:--f)v.push(function(){var e,t,s;s=[];for(i=e=0,t=N.gridHeight;0<=t?e<t:e>t;i=0<=t?++e:--e)C[h(N.ages[r][i])][n[r][i]]?s.push(N.ages[r][i]++):s.push(N.ages[r][i]=0);return s}());return v};l=function(){var e,n,i,s,o,u,f,l;i=(new Date).getTime()/1e4;l=[];for(s=u=0,f=N.gridWidth;0<=f?u<f:u>f;s=0<=f?++u:--u)l.push(function(){var u,f,l;l=[];for(o=u=0,f=N.gridHeight;0<=f?u<f:u>f;o=0<=f?++u:--u){e=N.ages[s][o];if(e!==0){n=Math.sqrt(e);n*=.2;a.fillStyle=t((n+i)%1,1,1);l.push(a.fillRect(N.gridSpacing*s,N.gridSpacing*o,N.gridSpacing-r,N.gridSpacing-r))}else l.push(void 0)}return l}());return l};f=function(){N.paused||u();a.fillStyle=x(0,0,0);n();l();if(N.ages[b.getGridX()][b.getGridY()]!==0){a.fillStyle=T(255,255,255,.7);a.fillRect(b.getGridX()*N.gridSpacing,b.getGridY()*N.gridSpacing,N.gridSpacing-r,N.gridSpacing-r)}return setTimeout(f,N.delay)};N.delay=0;N.userHasCreatedCells=!1;N.userHasChangedRules=!1;N.userHasDeletedCells=!1;setTimeout(function(){return L("#tutorialCreateCells")},1e3);o.width=window.innerWidth;o.height=window.innerHeight;s=50;i=o.height/9;N.gridSpacing=15;r=N.gridSpacing*.2;N.gridWidth=o.width/N.gridSpacing;N.gridHeight=o.width/N.gridSpacing;y=5;N.ages=E();N.brushSize=2;N.helpShown=!1;N.paused=!1;f()}).call(this);