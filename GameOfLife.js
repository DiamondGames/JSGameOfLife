(function(){var t,e,i,n,r,o,u,s,l,a,h,d,g,c,f,p,w,b,v,S,m,y,C,k,H,M,x,T,z,W,B,R;g=function(t){return 0===t?0:1},f=function(t,e,i){return e>=0&&i>=0&&e<t.length&&i<t[0].length?t[e][i]++:void 0},p=function(t,e,i){return t[(e+t.length)%t.length][(i+t[1].length)%t[1].length]++},c=p,R=function(t,e,i){return e>=0&&i>=0&&e<t.length&&i<t[0].length?t[e][i]=0:void 0},M=function(t,e,i){return"rgb("+t+","+e+","+i+")"},x=function(t,e,i,n){return"rgba("+t+","+e+","+i+","+n+")"},e=function(t,e,i){var n,r,o,u,s,l,a,h;switch(u=Math.floor(6*t),r=6*t-u,s=i*(1-e),l=i*(1-r*e),h=i*(1-(1-r)*e),u%6){case 0:a=i,o=h,n=s;break;case 1:a=l,o=i,n=s;break;case 2:a=s,o=i,n=h;break;case 3:a=s,o=l,n=i;break;case 4:a=h,o=s,n=i;break;case 5:a=i,o=s,n=l}return M(Math.floor(255*a),Math.floor(255*o),Math.floor(255*n))},t=jQuery,z=[[!1,!1,!1,!0,!1,!1,!1,!1,!1],[!1,!1,!0,!0,!1,!1,!1,!1,!1]],C=[[!1,!1,!1,!1,!1],[!1,!0,!0,!0,!1],[!1,!0,!1,!0,!1],[!1,!0,!0,!0,!1],[!1,!1,!1,!1,!1]],B=function(e){return t(e).css({visibility:"visible",opacity:0}),t(e).animate({opacity:1})},W=function(e){return t(e).animate({opacity:0},function(){return t(e).css({visibility:"hidden"})})},this.help=function(){return T.helpShown=!T.helpShown,T.paused=T.helpShown,T.helpShown?B(".helpBox"):W(".helpBox")},this.toggleRule=function(t,e){return z[t][e]=!z[t][e]},this.toggleNeighborhood=function(t,e){return C[t][e]=!C[t][e]},this.moreCells=function(){return T.gridSpacing*=.9,n*=.9,T.gridWidth=u.width/gridSpacing,T.gridHeight=u.width/gridSpacing,d()},this.fewerCells=function(){return T.gridSpacing/=.9,n/=.9,T.gridWidth=u.width/gridSpacing,T.gridHeight=u.width/gridSpacing},S={x:0,y:0,down:[!1,!1,!1,!1,!1,!1,!1,!1,!1],getX:function(){return this.x},getY:function(){return this.y},getButtonX:function(){return Math.floor(this.x/o)},getButtonY:function(){return Math.floor(this.y/r)},getGridX:function(){return Math.floor(this.x/gridSpacing)},getGridY:function(){return Math.floor(this.y/gridSpacing)},distanceTo:function(t,e){return Math.sqrt(Math.pow(t-this.x,2)+Math.pow(e-this.y,2))}},w=function(t){var e,i,n,r,o,u,s,l,a,h,d,g,f,p;if(S.x=t.pageX,S.y=t.pageY,e=S.getGridX(),i=S.getGridY(),S.down[1])for(T.userHasCreatedCells||(T.userHasCreatedCells=!0,W("#tutorialCreateCells"),T.userHasChangedRules||B("#tutorialChangeRules")),n=o=l=e-T.brushSize,a=e+1+T.brushSize;a>=l?a>o:o>a;n=a>=l?++o:--o)for(r=u=h=i-T.brushSize,d=i+1+T.brushSize;d>=h?d>u:u>d;r=d>=h?++u:--u)c(ages,n,r);if(S.down[3]){for(T.userHasDeletedCells=!0,p=[],n=s=g=e-T.brushSize,f=e+1+T.brushSize;f>=g?f>s:s>f;n=f>=g?++s:--s)p.push(function(){var t,e,o,u;for(u=[],r=t=e=i-T.brushSize,o=i+1+T.brushSize;o>=e?o>t:t>o;r=o>=e?++t:--t)u.push(R(ages,n,r));return u}());return p}},d=function(){return T.ages=k()},t(window).resize(function(){var t,e;return u.width=window.innerWidth,u.height=window.innerHeight,e=50,t=u.height/9,T.gridWidth=u.width/gridSpacing,T.gridHeight=u.width/gridSpacing,d()}),t(function(){var e,i,n,r,o,u,s,l,a,h,d,g,c,f,p,b,m,y,k;for(t("#ruleTable").append('<tr>\n	<th title="This column determines how dead cells can come to life" style="height:30px;" class="tableHeader">Dead</th>\n	<th title="This column determines how live cells can stay alive" style="height:30px;" class="tableHeader">Alive</th>\n</tr>'),r=l=0,p=9;p>=0?p>l:l>p;r=p>=0?++l:--l)i="ruleButton",z[0][r]&&(i+=" down"),n="ruleButton",z[1][r]&&(n+=" down"),t("#ruleTable").append('<tr>\n	<td title="When this button is illuminated, dead cells with '+r+" neighbors will come to life.\nWhen this button is dark, dead cells with "+r+' neighbors will stay dead."\ntype="button" class=" '+i+' " onclick="toggleRule(0, '+r+')">'+r+'</td>\n<td title="When this button is illuminated, live cells with '+r+" neighbors will stay alive.\nWhen this button is dark, live cells with "+r+' neighbors will die."\ntype="button" class=" '+n+' " onclick="toggleRule(1, '+r+')">'+r+"</td>\n</tr>");for(o=t("#neighborhoodOptionsTable>tbody"),b=function(){y=[];for(var t=0;v>=0?v>t:t>v;v>=0?t++:t--)y.push(t);return y}.apply(this).reverse(),a=0,g=b.length;g>a;a++){for(s=b[a],o.append("<tr>"),m=function(){k=[];for(var t=0;v>=0?v>t:t>v;v>=0?t++:t--)k.push(t);return k}.apply(this).reverse(),d=0,c=m.length;c>d;d++)u=m[d],e="neighborhoodButton",C[u][s]&&(e+=" down"),o.append('<td type="button" class=" '+e+' " onclick="toggleNeighborhood( '+u+","+s+' )"></td>');o.append("</tr>")}return t(".ruleButton").click(function(){var t;return T.userHasChangedRules?void 0:(T.userHasChangedRules=!0,W("#tutorialChangeRules"),t=1e3,setTimeout(function(){return B("#tutorialLeftCol")},t),setTimeout(function(){return W("#tutorialLeftCol")},t+=4e3),setTimeout(function(){return B("#tutorialRightCol")},t),setTimeout(function(){return W("#tutorialRightCol")},t+=4e3),setTimeout(function(){return B("#tutorialRow")},t),setTimeout(function(){return W("#tutorialRow")},t+=4e3),setTimeout(function(){return B("#tutorialMouseOver")},t),setTimeout(function(){return W("#tutorialMouseOver")},t+=4e3))}),t("#speedOptionsMinButton").click(function(){return t("#speedOptionsDiv").slideToggle()}),t("#gridSizeOptionsMinButton").click(function(){return t("#gridSizeOptionsDiv").slideToggle()}),t("#brushOptionsMinButton").click(function(){return t("#brushOptionsDiv").slideToggle()}),t("#neighborhoodOptionsMinButton").click(function(){return t("#neighborhoodOptionsDiv").slideToggle()}),t("#myCanvas").mousedown(function(t){return S.down[t.which]=!0,w(t)}),t("#myCanvas").mouseup(function(t){return S.down[t.which]=!1,T.help?(T.help=!1,T.paused=!1):void 0}),t("#myCanvas").mousemove(function(t){return w(t)}),t("#pauseButton").click(function(){return T.paused=!T.paused,t(this).html(T.paused?"Play":"Pause")}),t("#1x1").click(function(){return T.brushSize=0}),t("#2x2").click(function(){return T.brushSize=.5}),t("#3x3").click(function(){return T.brushSize=1}),t("#5x5").click(function(){return T.brushSize=2}),t("#9x9").click(function(){return T.brushSize=4}),t(".neighborhoodButton,.minButton,.ruleButton").addClass("toggle"),t(".toggle").click(function(){return t(this).toggleClass("down")}),t(".radio").click(function(){return t(this).siblings().removeClass("down"),t(this).addClass("down")}),t("#5x5").click(),t("#fast").click()}),T="undefined"!=typeof exports&&null!==exports?exports:this,u=document.getElementById("myCanvas"),l=u.getContext("2d"),this.setDelay=function(t){return T.delay=t},i=function(){var t;return t=1e5,l.fillRect(-t,-t,2*t,2*t)},b=function(){var t,e,i,n,r;for(r=[],t=i=0,n=T.gridWidth;n>=0?n>i:i>n;t=n>=0?++i:--i)r.push(function(){var t,i,n;for(n=[],e=t=0,i=T.gridHeight;i>=0?i>t:t>i;e=i>=0?++t:--t)n.push(0);return n}());return r},this.clearGrid=function(){var t,e,i,n,r;for(r=[],t=i=0,n=T.gridWidth;n>=0?n>i:i>n;t=n>=0?++i:--i)r.push(function(){var i,n,r;for(r=[],e=i=0,n=T.gridHeight;n>=0?n>i:i>n;e=n>=0?++i:--i)r.push(T.ages[t][e]=0);return r}());return r},H=function(t,e){var i,n,r,o;for(console.log(T.gridWidth),o=[],i=r=0;t>=0?t>r:r>t;i=t>=0?++r:--r)o.push(function(){var t,i;for(i=[],n=t=0;e>=0?e>t:t>e;n=e>=0?++t:--t)i.push(Math.floor(Math.random()+.4));return i}());return o},k=function(){return H(T.gridWidth,T.gridHeight)},this.randomizeGrid=function(){var t,e,i,n,r;for(r=[],t=i=0,n=T.gridWidth;n>=0?n>i:i>n;t=n>=0?++i:--i)r.push(function(){var i,n,r;for(r=[],e=i=0,n=T.gridHeight;n>=0?n>i:i>n;e=n>=0?++i:--i)r.push(T.ages[t][e]=Math.floor(Math.random()+.4));return r}());return r},s=function(){var t,e,i,n,r,o,u,s,l,a,h,d,f,p;for(i=b(),n=o=0,h=T.gridWidth;h>=0?h>o:o>h;n=h>=0?++o:--o)for(r=u=0,d=T.gridHeight;d>=0?d>u:u>d;r=d>=0?++u:--u)if(0!==T.ages[n][r])for(t=s=0;v>=0?v>s:s>v;t=v>=0?++s:--s)for(e=l=0;v>=0?v>l:l>v;e=v>=0?++l:--l)C[t][e]&&c(i,n+t-2,r+e-2);for(p=[],n=a=0,f=T.gridWidth;f>=0?f>a:a>f;n=f>=0?++a:--a)p.push(function(){var t,e,o;for(o=[],r=t=0,e=T.gridHeight;e>=0?e>t:t>e;r=e>=0?++t:--t)o.push(z[g(T.ages[n][r])][i[n][r]]?T.ages[n][r]++:T.ages[n][r]=0);return o}());return p},h=function(){var t,i,r,o,u,s,a,h;for(r=(new Date).getTime()/1e4,h=[],o=s=0,a=T.gridWidth;a>=0?a>s:s>a;o=a>=0?++s:--s)h.push(function(){var s,a,h;for(h=[],u=s=0,a=T.gridHeight;a>=0?a>s:s>a;u=a>=0?++s:--s)t=T.ages[o][u],0!==t?(i=Math.sqrt(t),i*=.2,l.fillStyle=e((i+r)%1,1,1),h.push(l.fillRect(T.gridSpacing*o,T.gridSpacing*u,T.gridSpacing-n,T.gridSpacing-n))):h.push(void 0);return h}());return h},a=function(){var t;return T.paused||s(),l.fillStyle=M(0,0,0),i(),h(),0!==T.ages[S.getGridX()][S.getGridY()]&&(l.fillStyle=x(255,255,255,.7),l.fillRect(S.getGridX()*T.gridSpacing,S.getGridY()*T.gridSpacing,T.gridSpacing-n,T.gridSpacing-n)),t=requestAnimationFrame.bind(this,a),setTimeout(t,T.delay)},T.delay=0,T.userHasCreatedCells=!1,T.userHasChangedRules=!1,T.userHasDeletedCells=!1,setTimeout(function(){return B("#tutorialCreateCells")},1e3),u.width=window.innerWidth,u.height=window.innerHeight,o=50,r=u.height/9,T.gridSpacing=15,n=.2*T.gridSpacing,T.gridWidth=u.width/T.gridSpacing,T.gridHeight=u.width/T.gridSpacing,m=0,y=0,v=5,T.ages=k(),T.brushSize=2,T.helpShown=!1,T.paused=!1,l.font="20px Georgia",a()}).call(this);