(function(){var x,C,s,q,D,y,u,r,E,c,z,F,G,H,f,k,d,m,I,l,g,A,v,J,t,K;x=jQuery;r=document.getElementById("myCanvas");c=r.getContext("2d");D=function(){return c.fillRect(-1E5,-1E5,2E5,2E5)};I=function(){var a,b;b=[];for(a=0;0<=d?a<d:a>d;0<=d?++a:--a)b.push(function(){var a,b;b=[];for(a=0;0<=f?a<f:a>f;0<=f?++a:--a)b.push(0);return b}());return b};H=function(a){return 0===a?0:1};m=function(a,b,e){if(0<=b&&0<=e&&b<a.length&&e<a[0].length)return a[b][e]++};K=function(a,b,e){if(0<=b&&0<=e&&b<a.length&&e<
a[0].length)return a[b][e]=0};g=function(a,b,e){return"rgb("+a+","+b+","+e+")"};A=function(a,b,e,p){return"rgba("+a+","+b+","+e+","+p+")"};C=function(a,b,e){var p,c,h,B,f,d;B=Math.floor(6*a);c=6*a-B;a=e*(1-b);f=e*(1-c*b);b=e*(1-(1-c)*b);switch(B%6){case 0:d=e;h=b;p=a;break;case 1:d=f;h=e;p=a;break;case 2:d=a;h=e;p=b;break;case 3:d=a;h=f;p=e;break;case 4:d=b;h=a;p=e;break;case 5:d=e,h=a,p=f}return g(Math.floor(255*d),Math.floor(255*h),Math.floor(255*p))};l={x:0,y:0,down:[!1,!1,!1,!1,!1,!1,!1,!1,!1],
getX:function(){return this.x},getY:function(){return this.y},getButtonX:function(){return Math.floor(this.x/u)},getButtonY:function(){return Math.floor(this.y/y)},getGridX:function(){return Math.floor(this.x/k)},getGridY:function(){return Math.floor(this.y/k)},distanceTo:function(a,b){return Math.sqrt(Math.pow(a-this.x,2)+Math.pow(b-this.y,2))}};x("#myCanvas").mousedown(function(a){l.down[a.which]=!0;if(1===a.which&&l.x<2*u&&(v[l.getButtonX()][l.getButtonY()]=!v[l.getButtonX()][l.getButtonY()],3===
t))return t++,setTimeout(s,1E3),setTimeout(s,3E3),setTimeout(s,4E3),setTimeout(s,6E3)});x("#myCanvas").mouseup(function(a){return l.down[a.which]=!1});x("#myCanvas").mousemove(function(a){var b,e,c,d,h,f,k,g,w;l.x=a.pageX;l.y=a.pageY;a=l.getGridX();b=l.getGridY();if(l.down[1])for(1===t&&(t++,setTimeout(s,1E3)),e=d=f=a-2,k=a+1+2;f<=k?d<k:d>k;e=f<=k?++d:--d)for(c=h=g=b-2,w=b+1+2;g<=w?h<w:h>w;c=g<=w?++h:--h)m(q,e,c);if(l.down[3]){f=[];e=d=h=a-2;for(a=a+1+2;h<=a?d<a:d>a;e=h<=a?++d:--d)f.push(function(){var a,
d,f,h;h=[];c=a=d=b-2;for(f=b+1+2;d<=f?a<f:a>f;c=d<=f?++a:--a)h.push(K(q,e,c));return h}());return f}});E=function(){var a,b,e,c,n;a=I();for(b=c=0;0<=d?c<d:c>d;b=0<=d?++c:--c)for(e=n=0;0<=f?n<f:n>f;e=0<=f?++n:--n)0!==q[b][e]&&(m(a,b-1,e-1),m(a,b-1,e),m(a,b-1,e+1),m(a,b,e-1),m(a,b,e+1),m(a,b+1,e-1),m(a,b+1,e),m(a,b+1,e+1));n=[];for(b=c=0;0<=d?c<d:c>d;b=0<=d?++c:--c)n.push(function(){var c,d;d=[];for(e=c=0;0<=f?c<f:c>f;e=0<=f?++c:--c)v[H(q[b][e])][a[b][e]]?d.push(q[b][e]++):d.push(q[b][e]=0);return d}());
return n};G=function(){var a,b,e,p,n,h,g,m;p=(new Date).getTime()/1E4;m=[];for(n=g=0;0<=d?g<d:g>d;n=0<=d?++g:--g)m.push(function(){var d,g;g=[];for(h=d=0;0<=f?d<f:d>f;h=0<=f?++d:--d)a=q[n][h],0!==a?(e=l.distanceTo(n*k,h*k)/10,b=Math.sqrt(a),b*=0.2,c.fillStyle=C((b+p)%1,1-1/e,1),g.push(c.fillRect(k*n,k*h,k-3,k-3))):g.push(void 0);return g}());return m};F=function(){var a,b,e,d,f;f=[];for(b=d=0;2>d;b=++d)f.push(function(){var d,f;f=[];for(e=d=0;9>d;e=++d)a=b===l.getButtonX()&&e===l.getButtonY()?1:0.5,
c.fillStyle=v[b][e]?A(255,255,255,a):A(0,0,0,a),f.push(c.fillRect(u*b,y*e,u,y));return f}());return f};z=function(){E();c.fillStyle=g(0,0,0);D();G();F();c.save();J();c.restore();return setTimeout(z,0)};J=function(){switch(t){case 1:return c.translate(r.width-250,70),c.fillStyle=g(100,100,100),c.fillRect(-10,-20,200,50),c.fillStyle=g(255,255,255),c.fillText("Left-click and drag",0,0),c.fillText("to create new cells",0,20);case 3:return c.translate(200,70),c.fillStyle=g(100,100,100),c.fillRect(-10,
-20,220,50),c.fillStyle=g(255,255,255),c.fillText("Click on these buttons",0,0),c.fillText("to change the rules",0,20);case 5:return c.translate(200,70),c.fillStyle=g(100,100,100),c.fillRect(-10,-20,320,70),c.fillStyle=g(255,255,255),c.fillText("The left column tells",0,0),c.fillText("how many neighbours a dead cell",0,20),c.fillText("needs in order to come to life",0,40);case 7:return c.translate(200,70),c.fillStyle=g(100,100,100),c.fillRect(-10,-20,320,70),c.fillStyle=g(255,255,255),c.fillText("The right column tells",
0,0),c.fillText("how many neighbours a live cell",0,20),c.fillText("needs in order to stay alive",0,40)}};s=function(){return t++};t=0;setTimeout(s,2E3);r.width=window.innerWidth;r.height=window.innerHeight;u=50;y=r.height/9;k=15;d=r.width/k;f=r.width/k;q=function(){var a,b;b=[];for(a=0;0<=d?a<d:a>d;0<=d?++a:--a)b.push(function(){var a,b;b=[];for(a=0;0<=f?a<f:a>f;0<=f?++a:--a)b.push(Math.floor(Math.random()+0.4));return b}());return b}();v=[[!1,!1,!1,!0,!1,!1,!1,!1,!1],[!1,!1,!0,!0,!1,!1,!1,!1,!1]];
c.font="20px Georgia";z()}).call(this);
